<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>DryPrompt - Configuration</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';" />
  </head>
  <body>
    <!-- Configuration View -->
    <div id="config-view" class="config-container">
      <h1>DryPrompt Configuration</h1>
      <p class="description">Enter your OpenAI API key to enable AI-powered prompt analysis:</p>
      
      <form id="config-form">
        <div class="form-group">
          <label for="api-key">OpenAI API Key:</label>
          <input 
            type="password" 
            id="api-key" 
            name="api-key" 
            placeholder="sk-..." 
            required 
            autocomplete="off"
          />
        </div>
        
        <div class="form-actions">
          <button type="submit" id="save-button" class="primary-button">Save Configuration</button>
        </div>
      </form>
      
      <div id="status-message" class="status-message hidden"></div>
    </div>

    <!-- Edit Dialog View -->
    <div id="edit-dialog-view" class="dialog-container" style="display: none;">
      <div class="dialog-header">
        <h2 class="dialog-title">Edit Shortcut</h2>
        <p class="dialog-subtitle" id="dialog-subtitle">Customize the AI suggestion to fit your preferences</p>
        
        <!-- Multi-suggestion navigation (hidden by default) -->
        <div class="multi-suggestion-nav" id="multi-suggestion-nav" style="display: none;">
          <button type="button" class="nav-btn" id="prev-suggestion-btn" title="Previous suggestion">‹</button>
          <span class="nav-indicator" id="nav-indicator">1 of 3</span>
          <button type="button" class="nav-btn" id="next-suggestion-btn" title="Next suggestion">›</button>
        </div>
      </div>

      <form id="edit-form">
        <div class="form-group">
          <label for="trigger-input">Shortcut Trigger</label>
          <div class="input-container" id="trigger-container">
            <div class="input-with-copy">
              <input 
                type="text" 
                id="trigger-input" 
                placeholder="-explaincode"
                spellcheck="false"
                autocomplete="off"
              >
              <button type="button" class="copy-btn" id="copy-trigger-btn" title="Copy trigger">
                ⧉
              </button>
            </div>
            <div class="validation-message" id="trigger-validation"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="replacement-input">Replacement Text</label>
          <div class="input-container" id="replacement-container">
            <div class="input-with-copy">
              <textarea 
                id="replacement-input" 
                placeholder="Enter the text that will replace the trigger..."
                spellcheck="true"
              ></textarea>
              <button type="button" class="copy-btn" id="copy-replacement-btn" title="Copy replacement text">
                ⧉
              </button>
            </div>
            <div class="validation-message" id="replacement-validation"></div>
            <div class="character-count" id="character-count">0 characters</div>
          </div>
        </div>

        <div class="preview-section">
          <div class="preview-title">Preview</div>
          <div class="preview-demo" id="preview-demo">
            Type your trigger <span class="preview-arrow">→</span> Get your replacement text
          </div>
        </div>

        <div class="source-prompts-section" id="source-prompts-section" style="display: none;">
          <div class="source-prompts-title">Source Prompts</div>
          <div class="source-prompts-subtitle" id="source-prompts-subtitle">These similar prompts led to this suggestion:</div>
          <div class="source-prompts-list" id="source-prompts-list">
            <!-- Source prompts will be populated here -->
          </div>
        </div>

        <div class="button-group">
          <button type="button" class="btn-secondary" id="cancel-btn">Cancel</button>
          <button type="button" class="btn-reject" id="reject-btn" style="display: none;">Reject This</button>
          <button type="submit" class="btn-primary" id="create-btn" disabled>Create Shortcut</button>
        </div>
      </form>
    </div>
    
    <script type="module" src="/src/renderer/renderer.ts"></script>
  </body>
</html>
